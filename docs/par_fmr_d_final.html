<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>COSMOS-S: FMR Parameters (par_fmr.d)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">COSMOS-S
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">FMR Parameters (par_fmr.d)</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Describes the parameters found in the <code>par_fmr.d</code> file for Fixed Mesh Refinement.</p>
<p>This file (<code>par_fmr.d</code>) configures the parameters for the Fixed Mesh Refinement (FMR) layers used in the COSMOS_S simulation. It defines the maximum number of refinement levels and, for each potential level, the grid boundary and the trigger condition (based on the central lapse value).</p>
<p>The file format consists of lines with a value followed by an optional comment starting with '#'. Lines starting directly with '#' are treated as comments and ignored during parsing by the <code>initial_fmr</code> function. The order of parameters is significant.</p>
<h1><a class="anchor" id="sec_par_fmr_format_final"></a>
File Format Example</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#----------------------------------------------------------------------#</span></div>
<div class="line"><span class="preprocessor">#                       FMR PARAMETERS                                 #</span></div>
<div class="line"><span class="preprocessor">#----------------------------------------------------------------------#</span></div>
<div class="line"><span class="preprocessor"># max fmr layer number (0 means no FMR)</span></div>
<div class="line">2                  # laymax (<span class="keywordtype">int</span>) Maximum number of refinement levels allowed (Level 0 is the base grid).</div>
<div class="line"> </div>
<div class="line"># grid number <span class="keywordflow">for</span> fmr region on z-axis (relative to lli of the parent layer)</div>
<div class="line"><span class="preprocessor"># These define the upper boundary (lui) of the refined region on the parent grid.</span></div>
<div class="line"><span class="preprocessor"># The refined grid will cover from z=0 up to the physical coordinate z(lbs[n]) of the parent grid.</span></div>
<div class="line"><span class="preprocessor"># Needs laymax+1 entries (though only lbs[0] to lbs[laymax-1] are used to define refinement).</span></div>
<div class="line">64                 # lbs[0] (int) Grid index on Layer 0 defining the boundary <span class="keywordflow">for</span> Layer 1.</div>
<div class="line">32                 # lbs[1] (<span class="keywordtype">int</span>) Grid index on Layer 1 defining the boundary <span class="keywordflow">for</span> Layer 2.</div>
<div class="line">16                 # lbs[2] (int) Grid index on Layer 2 defining the boundary <span class="keywordflow">for</span> Layer 3 (<span class="keywordflow">if</span> laymax allows).</div>
<div class="line">...                # lbs[n] ... up to lbs[laymax]</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># values of the lapse (alpha) at the center (l=lli, k=kli, j=jli) for starting fmr</span></div>
<div class="line"><span class="preprocessor"># When alpha at the center of layer n drops below alp_fmr[n], layer n+1 is created.</span></div>
<div class="line"><span class="preprocessor"># Needs laymax+1 entries (though only alp_fmr[0] to alp_fmr[laymax-1] are used as triggers).</span></div>
<div class="line">0.8                # alp_fmr[0] (double) Trigger value <span class="keywordflow">for</span> creating Layer 1.</div>
<div class="line">0.6                # alp_fmr[1] (<span class="keywordtype">double</span>) Trigger value <span class="keywordflow">for</span> creating Layer 2.</div>
<div class="line">0.4                # alp_fmr[2] (double) Trigger value <span class="keywordflow">for</span> creating Layer 3 (<span class="keywordflow">if</span> laymax allows).</div>
<div class="line">...                # alp_fmr[n] ... up to alp_fmr[laymax]</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_par_fmr_params_final"></a>
Parameter Descriptions</h1>
<ul>
<li><b>laymax</b>: (int) The maximum number of refinement <em>levels</em> allowed beyond the base grid (Layer 0). If <code>laymax = 0</code>, no FMR is used.</li>
<li><b>lbs[n]</b>: (int array) An array defining the spatial extent of each refinement level. <code>lbs[n]</code> specifies the grid index <code>l</code> (relative to <code>lli</code> of layer <code>n</code>) such that the refined region of layer <code>n+1</code> covers the physical space from <code>z=0</code> up to the coordinate <code>z(lli_n + lbs[n])</code> of layer <code>n</code>. The number of grid points in the refined region of layer <code>n+1</code> will be <code>2 * lbs[n]</code>.</li>
<li><b>alp_fmr[n]</b>: (double array) An array defining the trigger condition for creating the next refinement level. When the lapse <code>alpha</code> at the center (<code>l=lli</code>, <code>k=kli</code>, <code>j=jli</code>) of layer <code>n</code> drops below the value <code>alp_fmr[n]</code>, the simulation code creates layer <code>n+1</code> (provided <code>n &lt; laymax</code>). </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
